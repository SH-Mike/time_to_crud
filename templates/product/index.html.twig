{% extends 'base.html.twig' %}

{% block title %}
	Products
{% endblock %}

{% block body %}
	<div class="container">
		<h1 class="text-center underlined">Les produits</h1>
		<h2 class="mt-3">Cette page présente les différents produits dont nous avons les références dans nos données.</h2>
		Si vous souhaitez afficher uniquement certains produits, veuillez utiliser l'interface de recherche ci-dessous. Un produit manque à l'appel ?
		<a href="{{path('product_add')}}" class="btn btn-warning">Ajoutez-le ici</a>
		<br/>
		{{form_start(searchForm)}}
		<div class="row mt-3">
			<div class="col-md-3">
				{{form_widget(searchForm.search_category)}}
			</div>
			<div class="col-md-9">
				{{form_widget(searchForm.search_text)}}
			</div>
		</div>
		<div class="mt-3">
			{{form_widget(searchForm.submit)}}
		</div>
		{{form_end(searchForm)}}

		<hr>
		<div class="table-responsive mt-5">
			<table class="table table-hover table-stripped">
				<thead class="thead-dark">
					<tr>
						<th>Nom</th>
						<th>Date de création</th>
						<th>Plus d'informations</th>
						<th>-</th>
					</tr>
				</thead>
				<tbody>
					{% if products | length > 0 %}
						{% for product in products %}
							<tr>
								<td>
									<strong>{{product.name}}</strong>
								</td>
								<td>
									{{product.creationDate | date("d/m/Y")}}
								</td>
								<td>
									<i>{{product.description}}</i> <br/>
                                    Produit de la marque: {{product.brand.name}}
								</td>
								<td>
									<a href="{{ path('product_edit', {'product':product.id} ) }}" class="btn btn-warning">
										<i class="fas fa-pen"></i>
									</a>
									<a href="{{ path('product_delete', {'product':product.id} ) }}" class="btn btn-danger">
										<i class='fas fa-trash'></i>
									</a>
								</td>
							</tr>
						{% endfor %}
					{% else %}
						<tr>
							<td colspan="5" class="text-center">
								Aucun produit n'a été trouvé...
							</td>
						</tr>
					{% endif %}
				</tbody>
			</table>
		</div>
	</div>
{% endblock %}
